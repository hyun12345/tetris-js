{"ast":null,"code":"import _objectSpread from \"C:/jah-workspace/tetris-js/react-js/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:/jah-workspace/tetris-js/react-js/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _s = $RefreshSig$();\n\nimport { useState, useCallback } from 'react';\nimport { BOARD_WIDTH } from '../settingGame';\nimport { TETROMINOS, setBlock } from '../tetrominos';\nimport { useSelector, useDispatch } from 'react-redux';\nimport * as actions from '../_actions/index';\nexport var useCurrent = function useCurrent() {\n  _s();\n\n  // set default(board)\n  var _useState = useState({\n    pos: {\n      x: 0,\n      y: 0\n    },\n    tetromino: TETROMINOS[0].shape,\n    collided: false\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      current = _useState2[0],\n      setCurrent = _useState2[1];\n\n  var dispatch = useDispatch();\n  dispatch(actions.setCurrent(function (prev) {\n    return {\n      pos: {\n        x: 0,\n        y: 0\n      },\n      tetromino: TETROMINOS[0].shape,\n      collided: false\n    };\n  }));\n  var tetris = useSelector(function (store) {\n    return store.tetris;\n  });\n\n  var updateCurrentPos = function updateCurrentPos(_ref) {\n    var x = _ref.x,\n        y = _ref.y,\n        collided = _ref.collided;\n    dispatch(actions.setCurrent(function (prev) {\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        pos: {\n          x: prev.pos.x += x,\n          y: prev.pos.y += y\n        },\n        collided: collided\n      });\n    }));\n    setCurrent(function (prev) {\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        pos: {\n          x: prev.pos.x += x,\n          y: prev.pos.y += y\n        },\n        collided: collided\n      });\n    });\n  }; // reset\n\n\n  var resetCurrent = useCallback(function () {\n    dispatch(actions.setCurrent({\n      // x result : set block position center of the board\n      pos: {\n        x: BOARD_WIDTH / 2 - 1,\n        y: 0\n      },\n      tetromino: setBlock().shape,\n      collided: false\n    }));\n    setCurrent({\n      // x result : set block position center of the board\n      pos: {\n        x: BOARD_WIDTH / 2 - 1,\n        y: 0\n      },\n      tetromino: setBlock().shape,\n      collided: false\n    });\n  }, [dispatch]);\n  console.log({\n    current: current,\n    tetrisCurrent: tetris.current\n  });\n  return [current, updateCurrentPos, resetCurrent];\n};\n\n_s(useCurrent, \"MzZJjXwy8xfLVZI1kalVqyPiXGQ=\", false, function () {\n  return [useDispatch, useSelector];\n});","map":{"version":3,"sources":["C:/jah-workspace/tetris-js/react-js/src/_hooks/useCurrent.js"],"names":["useState","useCallback","BOARD_WIDTH","TETROMINOS","setBlock","useSelector","useDispatch","actions","useCurrent","pos","x","y","tetromino","shape","collided","current","setCurrent","dispatch","prev","tetris","store","updateCurrentPos","resetCurrent","console","log","tetrisCurrent"],"mappings":"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","sourcesContent":["import { useState, useCallback } from 'react';\r\nimport { BOARD_WIDTH } from '../settingGame';\r\nimport { TETROMINOS, setBlock } from '../tetrominos';\r\n\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport * as actions from '../_actions/index';\r\n\r\nexport const useCurrent = () => {\r\n    // set default(board)\r\n    const [current, setCurrent] = useState({\r\n        pos: { x: 0, y: 0 },\r\n        tetromino: TETROMINOS[0].shape,\r\n        collided: false,\r\n    });\r\n\r\n    const dispatch = useDispatch();\r\n    dispatch(actions.setCurrent(prev => ({\r\n        pos: { x: 0, y: 0 },\r\n        tetromino: TETROMINOS[0].shape,\r\n        collided: false,\r\n    })));\r\n    const tetris = useSelector((store) => store.tetris);\r\n\r\n    const updateCurrentPos = ({ x, y, collided }) => {\r\n        dispatch(actions.setCurrent(prev => ({\r\n            ...prev,\r\n            pos: { x: (prev.pos.x += x), y: (prev.pos.y += y) },\r\n            collided,\r\n        })));\r\n        setCurrent(prev => ({\r\n            ...prev,\r\n            pos: { x: (prev.pos.x += x), y: (prev.pos.y += y) },\r\n            collided,\r\n        }));\r\n    };\r\n\r\n    // reset\r\n    const resetCurrent = useCallback(() => {\r\n        dispatch(actions.setCurrent({\r\n            // x result : set block position center of the board\r\n            pos: { x: ((BOARD_WIDTH / 2) - 1), y: 0 },\r\n            tetromino: setBlock().shape,\r\n            collided: false,\r\n        }));\r\n        setCurrent({\r\n            // x result : set block position center of the board\r\n            pos: { x: ((BOARD_WIDTH / 2) - 1), y: 0 },\r\n            tetromino: setBlock().shape,\r\n            collided: false,\r\n        });\r\n    }, [dispatch, ]);\r\n\r\n    console.log({current:current, tetrisCurrent:tetris.current});\r\n\r\n    return [current, updateCurrentPos, resetCurrent];\r\n};\r\n"]},"metadata":{},"sourceType":"module"}